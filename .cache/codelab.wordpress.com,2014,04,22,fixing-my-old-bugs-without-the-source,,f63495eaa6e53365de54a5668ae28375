status: 200
content-length: 55505
content-location: http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/
x-nananana: Batcache
vary: Cookie
server: nginx
last-modified: Wed, 23 Apr 2014 12:14:42 GMT
connection: keep-alive
-content-encoding: gzip
link: <http://wp.me/p9Evn-5E>; rel=shortlink
cache-control: max-age=232, must-revalidate
date: Wed, 23 Apr 2014 12:15:50 GMT
x-hacker: If you're reading this, you should visit automattic.com/jobs and apply to join the fun, mention this header.
content-type: text/html; charset=UTF-8
x-pingback: http://codelab.wordpress.com/xmlrpc.php

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<!--
	generated 68 seconds ago
	generated in 0.334 seconds
	served from batcache in 0.002 seconds
	expires in 232 seconds
-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Fixing old bugs, without the source | Code Laboratorium</title>
<link rel="pingback" href="http://codelab.wordpress.com/xmlrpc.php" />
	<style type="text/css">
		.infinite-scroll #infinite-handle span {
			border-color: #0062A0 !important;
			color: #0062A0 !important;
		}
		.infinite-scroll #infinite-handle span:hover {
			background-color: #0062A0 !important;
			color: #fff;
		}
		#infinite-footer .blog-credits a,
		#infinite-footer .blog-info a,
		#infinite-footer .blog-credits a:hover,
		#infinite-footer .blog-info a:hover {
			color: #0062A0 !important;
		}
	</style>

<link rel="alternate" type="application/rss+xml" title="Code Laboratorium &raquo; Feed" href="http://codelab.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Code Laboratorium &raquo; Comments Feed" href="http://codelab.wordpress.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Code Laboratorium &raquo; Fixing old bugs, without the&nbsp;source Comments Feed" href="http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/feed/" />
<script type="text/javascript">
/* <![CDATA[ */
function addLoadEvent(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
/* ]]> */
</script>
<link rel='stylesheet' id='all-css-0' href='http://s0.wp.com/_static/??-eJx9UNFugzAM/KFlVsVUlYdp3xKIawJOHBEj1L9fYKqKipY3n3V3Ph+syfQSFaNCWEzihXzMwH7CDCNqsv1kdvTZ5/wBB3rHQi+BEKGTRc1dmGWF1TtCPYkON2Zkq+hMkqxvqCbz8e6j1wfogKGETEsHZGe20dVkvcxY9iFZ3RgBnbfIxSFWQ4Z0faq2cSh1nNOdk0DWB2P9+62/MhIU1gH+5z58AbF0lmuuf63n3ZJE3IzW7Xl/wvelaW+Xtrm2zfgL76K7+Q==' type='text/css' media='all' />
<link rel='stylesheet' id='print-css-0' href='http://s0.wp.com/wp-content/mu-plugins/global-print/global-print.css?m=1387483371g' type='text/css' media='print' />
<script type='text/javascript'>
/* <![CDATA[ */
var LoggedOutFollow = {"invalid_email":"Your subscription did not succeed, please try again with a valid email address."};
/* ]]> */
</script>
<script type='text/javascript' src='http://s0.wp.com/_static/??-eJyFj0kOwjAMRS+ESVEX0AXiLG3jRg6ZiBMiOD2pBAgKUlee3ve3RQkwepfQJaFZWD+QQciMsVe1B+Qmv9W8EZUjN5oskWdQXzLG2zOsAmBJxT7h1pJ7wR+uwXOyyFwt/0y/rchdCcsqpjGFfjxDRKb7z9bBeAXBZEWORc0VSp8TTN4YX0QhqTAtNTa/FRFNfUbCfPeiqqqTPe7abt8cuqbt9ANnG4Rf'></script>
<link rel='stylesheet' id='all-css-0' href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1377793621g' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='http://s2.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563g&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codelab.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codelab.wordpress.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Plugin reloading for 3dsmax&nbsp;exporters' href='http://codelab.wordpress.com/2014/03/25/plugin-reloading-for-3dsmax-exporters/' />
<meta name="generator" content="WordPress.com" />
<link rel='canonical' href='http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/' />
<link rel='shortlink' href='http://wp.me/p9Evn-5E' />
<link rel="alternate" type="application/json+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=json&amp;url=http%3A%2F%2Fcodelab.wordpress.com%2F2014%2F04%2F22%2Ffixing-my-old-bugs-without-the-source%2F&amp;for=wpcom-auto-discovery" /><link rel="alternate" type="application/xml+oembed" href="https://public-api.wordpress.com/oembed/1.0/?format=xml&amp;url=http%3A%2F%2Fcodelab.wordpress.com%2F2014%2F04%2F22%2Ffixing-my-old-bugs-without-the-source%2F&amp;for=wpcom-auto-discovery" />
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Fixing old bugs, without the source" />
<meta property="og:url" content="http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/" />
<meta property="og:description" content="Once upon a time, I made a special kind of demoscene production: a wedtro. Which is a kind of small demo, made as a present to some other member of the demoscene, who is getting married. This wedtr..." />
<meta property="article:published_time" content="2014-04-22T23:36:45+00:00" />
<meta property="article:modified_time" content="2014-04-23T01:21:14+00:00" />
<meta property="article:author" content="http://codelab.wordpress.com/author/codelab/" />
<meta property="og:site_name" content="Code Laboratorium" />
<meta property="og:image" content="http://codelab.files.wordpress.com/2014/04/wedtroid_patching_full1.png" />
<meta property="og:image" content="http://codelab.files.wordpress.com/2014/04/wedtroid-after.png" />
<meta property="og:image" content="http://codelab.files.wordpress.com/2014/04/wedtroid-before.png" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta name="twitter:image" content="http://codelab.files.wordpress.com/2014/04/wedtroid-before.png?w=240" />
<meta name="twitter:card" content="summary" />
<meta property="fb:app_id" content="249643311490" />
<meta property="article:publisher" content="https://www.facebook.com/WordPresscom" />
<link rel="shortcut icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311975824g" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="http://s2.wp.com/i/favicon.ico?m=1311975824g" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="http://s0.wp.com/i/webclip.png?m=1391188133g" />
<link rel='openid.server' href='http://codelab.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='http://codelab.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="http://codelab.wordpress.com/osd.xml" title="Code Laboratorium" />
<link rel="search" type="application/opensearchdescription+xml" href="http://wordpress.com/opensearch.xml" title="WordPress.com" />
<style type="text/css">
.widget_twitter li {
	word-wrap: break-word;
}
</style>
<meta name="application-name" content="Code Laboratorium" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Musings of a grumpy coder" /><meta name="msapplication-task" content="name=Subscribe;action-uri=http://codelab.wordpress.com/feed/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=http://s2.wp.com/i/favicon.ico" /><meta name="title" content="Fixing old bugs, without the&nbsp;source | Code Laboratorium on WordPress.com" />
<meta name="description" content="Once upon a time, I made a special kind of demoscene production: a wedtro. Which is a kind of small demo, made as a present to some other member of the demoscene, who is getting married. This wedtro, turned out to be the buggiest piece of shit I&#039;ve ever released, and it&#039;s been bugging me&hellip;" />

<script type='text/javascript'>/*<![CDATA[*/if(typeof(addLoadEvent)!='undefined'){addLoadEvent(function(){if(top==self){i=document.createElement('img');i.src='http://botd.wordpress.com/botd.gif?blogid=2300657&postid=350&lang=1&date=1398209805&ip=80.77.101.233&url=http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/&loc='+document.location;i.id='botd';i.style.width='0px';i.style.height='0px';i.style.overflow='hidden';document.body.appendChild(i);}});}/*]]>*/</script>

<script type='text/javascript'>/*<![CDATA[*/if(typeof(addLoadEvent)!='undefined'){addLoadEvent(function(){if(top==self){i=document.createElement('img');i.src='http://botd2.wordpress.com/botd.gif?blog=2300657&post=350&lang=en&date=1398209805&ip=80.77.101.233&url=http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/';i.id='botd2';i.style.width='0px';i.style.height='0px';i.style.overflow='hidden';document.body.appendChild(i);}});}/*]]>*/</script>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="sidebars mp6 highlander-enabled highlander-light">

<div id="navigation"></div>

<div id="wrapper">
	<div id="container" class="clear-block">

	<div id="header">
		<div id="logo-floater">
			<h1><a href="http://codelab.wordpress.com/">Code Laboratorium</a></h1>
		</div>

		<ul class="links primary-links">
	<li class="page_item page-item-2"><a href="http://codelab.wordpress.com/about/">About</a></li>
</ul>

	</div> <!-- /header -->

<div id="sidebar-left" class="sidebar">

<ul class="menu">

<li id="image-3" class="widget widget_image"><div style="overflow:hidden;"><img src="http://codelab.files.wordpress.com/2011/06/nuc1s.png?w=150&amp;h=144" alt="my head" title="nuclear the magnificent" class="alignnone" width="150" height="144" /></div>
</li>
<li id="pages-3" class="widget widget_pages"><h2 class="widgettitle">Pages</h2>
		<ul>
			<li class="page_item page-item-2"><a href="http://codelab.wordpress.com/about/">About</a></li>
		</ul>
		</li>
<li id="twitter-3" class="widget widget_twitter"><h2 class="widgettitle"><a href='http://twitter.com/jtsiomb'>My twitter feed</a></h2>
<ul class='tweets'>
			<li>
				New blog post on how I fixed a bug in a (crappy) demoscene prod I released 11 years ago, and no longer have the code: <a href="http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/"> codelab.wordpress.com/2014/04/22/fix…</a> 				<a href="http://twitter.com/jtsiomb/statuses/458755121477066752" class="timesince">12&nbsp;hours&nbsp;ago</a>
			</li>

			
			<li>
				Started mirroring my projects on github with hg-git. Now we can have hip, trendy, social hacking fun together :) <a href="https://github.com/jtsiomb?tab=repositories"> github.com/jtsiomb?tab=re…</a> 				<a href="http://twitter.com/jtsiomb/statuses/456676371658309632" class="timesince">6&nbsp;days&nbsp;ago</a>
			</li>

			
			<li>
				RT @<a href='http://twitter.com/sobfoo'>sobfoo</a>: Goodbye <a href='http://twitter.com/search?q=%23dyndns'>#dyndns</a>, thanks for all these years but your policy sucks nowadays. Hello <a href="http://nsupdate.info"> nsupdate.info</a> <a href='http://twitter.com/search?q=%23DDNS'>#DDNS</a> <a href='http://twitter.com/search?q=%23linuxadmin'>#linuxadmin</a> <a href='http://twitter.com/search?q=%23dev'>#dev</a>… 				<a href="http://twitter.com/jtsiomb/statuses/455907905662107648" class="timesince">1&nbsp;week&nbsp;ago</a>
			</li>

			
			<li>
				Released libdrawtext v0.2 (my OGL text drawing lib) now with the option to drop freetype dep &amp; use prebuilt glyphmaps <a href="http://nuclear.mutantstargoat.com/sw/libdrawtext/"> nuclear.mutantstargoat.com/sw/libdrawtext/</a> 				<a href="http://twitter.com/jtsiomb/statuses/455905678792876033" class="timesince">1&nbsp;week&nbsp;ago</a>
			</li>

			
			<li>
				Posted on my blog about my stub plugin, to avoid restarting 3DS Max all the time, while debugging my goat3d exporter: <a href="http://codelab.wordpress.com/2014/03/25/plugin-reloading-for-3dsmax-exporters/"> codelab.wordpress.com/2014/03/25/plu…</a> 				<a href="http://twitter.com/jtsiomb/statuses/448524576759484416" class="timesince">4&nbsp;weeks&nbsp;ago</a>
			</li>

			</ul></li>
</ul>

</div>
<div id="center"><div id="squeeze"><div class="right-corner"><div class="left-corner">
<!-- begin content -->
<div class="node" id="garland-content">

<div class="post-350 post type-post status-publish format-standard hentry category-articles category-demoscene category-graphics category-hacks tag-bug tag-debugging tag-demoscene tag-disassembly tag-quadra tag-the-lab tag-wedtro tag-wedtroid tag-z-ordering">

<h2>Fixing old bugs, without the&nbsp;source</h2>
<span class="submitted">April 22, 2014 &#8212; Nuclear </span>

<div class="content">
<p>Once upon a time, I made a special kind of demoscene production: a wedtro. Which is a kind of small demo, made as a present to some other member of the demoscene, who is getting married. This wedtro, turned out to be the buggiest piece of shit I&#8217;ve ever released, and it&#8217;s been bugging me for the past decade. Until today I decided to fix it.</p>
<p><span id="more-350"></span></p>
<h3>Retrospective</h3>
<p>The original release of this wedtro was during the summer of 2003, in the hayday of the &#8220;second coming of the Greek demoscene&#8221;. Our friend Cybernoid was getting married, and we (Nuclear / The Lab and Imak / Quadra) decided to make him a wedtro as a wedding present.</p>
<p>Imak came to my place, with his perlin noise procedural texture generation code, while pulled in my Direct3D 8.0 3D engine, that I had used for <a href="http://www.pouet.net/prod.php?which=9585">Absence</a> a few months earlier. I also made a couple of crappy objects in 3d studio max, and we dug up an old fasttracker module by Thor/Quadra, which seemed cute and cuddly enough for the occasion.</p>
<p>My 3D engine code had rotted away apparently. Probably I was making half-assed changes and attempts to add new features after the release of Absence, and the wedtro effort was plagued with bugs from the start. I seem to remember that even trying to do a fade-out at some point with a blended fullscreen quad took us a long time to make it work. On top of everything else, Raoul/nlogn also dropped by, insisting to show us games on his dreamcast for some reason (Ikaruga and Rez if I remember correctly).</p>
<p>We didn&#8217;t manage to finish the prod before the &#8220;deadline&#8221; (wedding day), but we managed to send it to them, the day after: <a href="http://www.pouet.net/prod.php?which=10431">http://www.pouet.net/prod.php?which=10431</a>.</p>
<h3>Z-buffering bug</h3>
<p>A few years later, no computer in the known universe managed to run this wedtro correctly. I first noticed the bug on an ATI card, and my first reflex was to blame their crappy drivers as usual, but it turned out that no modern graphics card was able to render it correctly.</p>
<p><a href="http://codelab.files.wordpress.com/2014/04/wedtroid-before.png"><img src="http://codelab.files.wordpress.com/2014/04/wedtroid-before.png?w=300&#038;h=232" alt="wedtroid-before" width="300" height="232" class="alignnone size-medium wp-image-352" /></a></p>
<p>I finally decided to look into it around 2011, and see if I can find out why it broke over the years. I had since lost the source code of the demo itself, in the NFS-symlink <code>rm&nbsp;-rf</code> fiasco of 2008, so a fix was out of the question. But I had the code of the 3D engine (or at least a version of it) still, so I could at least satisfy my curiosity.</p>
<p>It turns out, I had two code-paths in the high-level <code>Object::Render</code> code:<br />
<code>
<pre>
  if(TexUnits &lt; 4) {
      Render2TexUnits();
  } else {
      Render4TexUnits();
  }</pre>
<p></code></p>
<p>These calls managed the hellish fixed-function multitexturing API, to render the <code>Object</code>s with all their materials and textures. <code>Render2TexUnits</code> would be called on graphics cards with less than 4 texture units, and would use more render passes to blend all the textures correctly, while <code>Render4TexUnits</code> was able to render everything in just one or two passes, on capable hardware.</p>
<p>Problem is, when I was writing that code, I only had a Geforce2 MX, which as was typical of that era, only had 2 texture units. So, the 4-texture-unit code path was never actually tested. And it turns out, there was a lurking copy-paste bug in there, to ruin my decade.</p>
<p>There was a check in the begining of both these functions: if the caller requested to draw withot writing to the zbuffer, they masked zbuffer writes for the duration of the call. But while Render2TexUnits did:<br />
<code>
<pre>
  void Object::Render2TexUnits() {
      if(!rendp.ZWrite) gc-&gt;SetZWrite(false);
      ... do all the setup and drawing ...
      if(!rendp.ZWrite) gc-&gt;SetZWrite(true);
  }</pre>
<p></code></p>
<p>In Render4TexUnits, the following copy-paste bug went unnoticed:<br />
<code>
<pre>
  void Object::Render4TexUnits() {
      if(!rendp.ZWrite) gc-&gt;SetZWrite(false);
      ... do all the setup and drawing ...
      if(!rendp.ZWrite) gc-&gt;SetZWrite(false);
  }</pre>
<p></code></p>
<p>As soon as one object was rendered with zwrites masked, nothing from that point on could ever write to the zbuffer again. So when the blended firework particles started being rendered, with zwrites disabled, in the wedtro, the cake and everything else from that point on became messed up&#8230;</p>
<h3>Fixing it the hard way</h3>
<p>Fast-forward a few years (2014), and the wedtro bug still bugs me. It&#8217;s bugging me for a decade now&#8230; so I decided to try and do something about it. Fuck the source code; I download a disassembler (IDA Pro freeware), make a copy of wedtro.exe and start digging.</p>
<p>My initial plan was to locate <code>Object::Render</code> and make the call to <code>Render2TexUnits</code> unconditional. But it&#8217;s kinda tricky going through vtables to find which virtual function is which (of course I had no debug symbols in the binary, which was compiled with msvc in release mode). So I started looking for the initialization code, which was simpler to locate since it referred to a lot of error strings like &#8220;Could not create Direct3D device&#8221;, etc.</p>
<p>As luck would have it, immediately after two successive instances of <code>throw&nbsp;EngineInitException("Could not create Direct3D device")</code>, there was a block of code pulling the relevant bits from the D3DCAPS8 structure and putting them in class variables:<br />
<code>
<pre>
  gc-&gt;WindowHandle = WindowHandle;
  gc-&gt;D3DDevice-&gt;GetRenderTarget(&amp;gc-&gt;MainRenderTarget.ColorSurface);
  gc-&gt;D3DDevice-&gt;GetDepthStencilSurface(&amp;gc-&gt;MainRenderTarget.DepthStencilSurface);
  gc-&gt;ContextParams = *GCParams;
  gc-&gt;ZFormat = zfmt;
  gc-&gt;AASamples = AASamples;
  gc-&gt;ColorFormat = FinalColorFormat;
  gc-&gt;MaxTextureStages = adapters[AdapterID].Capabilities.MaxSimultaneousTextures;</pre>
<p></code></p>
<p><code>gc-&gt;MaxTextureStages</code> is exactly what we needed to stay less than 4, to avoid taking the branch into <code>Object::Render4TexUnits</code> during drawing.</p>
<p>I followed the <code>call</code> instructions in the debugger, matching the number of arguments with the push instructions preceding them (2 pushes for 1 argument in the code, because of the hidden this pointer argument). Then I went over a <code>rep&nbsp;movsd</code> which was obviously the <code>gc-&gt;ContextParams&nbsp;=&nbsp;*GCParams</code> line.</p>
<p>I proceeded to set a breakpoint on the next instruction after that:<br />
<code>
<pre>
  mov ecx, [esp+1b0h+var_194]
  mov [ebp+42d0h], ecx</pre>
<p></code><br />
and ran the program to see if it is plausible that it&#8217;s the <code>gc-&gt;ZFormat&nbsp;=&nbsp;zfmt</code> line of the C++ source. I saw that it moved the value 75, which according to the D3D docs, corresponds to the <code>D3DFMT_D24S8</code> enumeration, a zbuffer format!</p>
<p>The layout of the member variables of any class instance in memory, follow exactly the order in which they where declared in the source. GraphicsContext, according to the &#8220;3dengine.h&#8221; header file has:<br />
<code>
<pre>
  D3DFORMAT ColorFormat, ZFormat;
  int AASamples;
  int MaxTextureStages;</pre>
<p></code><br />
So, since ZFormat was stored at <code>[ebp+42d0h]</code>, it follows that <code>MaxTextureStages</code> should be at offset 42d8h. Indeed a few lines later, we encounter the instructions:<br />
<code>
<pre>
  mov eax, [edx+ecx+0d0h]
  mov [ebp+42d8h], eax</pre>
<p></code><br />
Step a couple of times to reach these lines, and see what gets loaded into eax, expecting to see the value 8 for any modern graphics card, and bingo: the magic value 8 appears in eax! Manually zero-out the contents of eax and let the program continue, while praying to Odin&#8230; and victory! The beauty of a perfectly z-ordered wedding cake almost blinds me.</p>
<p><a href="http://codelab.files.wordpress.com/2014/04/wedtroid_patching_full1.png"><img src="http://codelab.files.wordpress.com/2014/04/wedtroid_patching_full1.png?w=780&#038;h=291" alt="wedtroid_patching_full1"   class="alignnone size-large wp-image-354" /></a></p>
<p>From that point on, everything is straightforward. Going to hex-view shows that the instruction <code>mov eax, [edx+ecx+0d0h]</code> corresponds to the 7 opcode bytes: <code>8B&nbsp;84&nbsp;0A&nbsp;D0&nbsp;00&nbsp;00&nbsp;00</code>. Not wanting to be buggered by complex move instructions with mod-r/m plus displacement bytes in the opcode, I decided to just replace it with <code>xor&nbsp;eax,eax</code> (setting eax to 0), which is a very simple 2-byte opcode. Going through the intel manuals, I found that <code>xor&nbsp;eax,eax</code> is encoded as: <code>31&nbsp;C0</code>, leaving 5 more bytes of the original instruction to be filled with NOPs (opcode 90). So I made the change with a hex editor, and the result is a fixed wedtroid executable, which everyone can enjoy :)</p>
<p><a href="http://codelab.files.wordpress.com/2014/04/wedtroid-after.png"><img src="http://codelab.files.wordpress.com/2014/04/wedtroid-after.png?w=300&#038;h=232" alt="wedtroid-after" width="300" height="232" class="alignnone size-medium wp-image-353" /></a></p>
<p>Feel free to <a href="http://nuclear.mutantstargoat.com/sw/demos/wedtroid_fixed.zip">download the fixed repack of wedtroid</a> if you want to watch it (windows only unfortunately, though wine should have no difficulty running it too).</p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled"><div class='sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded' id='like-post-wrapper-2300657-350-5357aeb21cce9' data-src='//widgets.wp.com/likes/#blog_id=2300657&amp;post_id=350&amp;origin=codelab.wordpress.com&amp;obj_id=2300657-350-5357aeb21cce9' data-name='like-post-frame-2300657-350-5357aeb21cce9'><h3 class='sd-title'>Like this:</h3><div class='likes-widget-placeholder post-likes-widget-placeholder' style='height:55px'><span class='button'><span>Like</span></span> <span class="loading">Loading...</span></div><span class='sd-text-color'></span><a class='sd-link-color'></a></div>
<div id='jp-relatedposts' class='jp-relatedposts' >
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</div></div></div>

<div class="meta">
Posted in <a href="http://codelab.wordpress.com/category/articles/" title="View all posts in articles" rel="category tag">articles</a>, <a href="http://codelab.wordpress.com/category/demoscene/" title="View all posts in demoscene" rel="category tag">demoscene</a>, <a href="http://codelab.wordpress.com/category/graphics/" title="View all posts in graphics" rel="category tag">graphics</a>, <a href="http://codelab.wordpress.com/category/hacks/" title="View all posts in hacks" rel="category tag">hacks</a>. Tags: <a href="http://codelab.wordpress.com/tag/bug/" rel="tag">bug</a>, <a href="http://codelab.wordpress.com/tag/debugging/" rel="tag">debugging</a>, <a href="http://codelab.wordpress.com/tag/demoscene/" rel="tag">demoscene</a>, <a href="http://codelab.wordpress.com/tag/disassembly/" rel="tag">disassembly</a>, <a href="http://codelab.wordpress.com/tag/quadra/" rel="tag">Quadra</a>, <a href="http://codelab.wordpress.com/tag/the-lab/" rel="tag">The Lab</a>, <a href="http://codelab.wordpress.com/tag/wedtro/" rel="tag">wedtro</a>, <a href="http://codelab.wordpress.com/tag/wedtroid/" rel="tag">wedtroid</a>, <a href="http://codelab.wordpress.com/tag/z-ordering/" rel="tag">z-ordering</a>. <a href="http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/#respond" title="Comment on Fixing old bugs, without the&nbsp;source">Leave a Comment &#187;</a></div>

</div>



								<div id="respond" class="comment-respond">
				<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2014/04/22/fixing-my-old-bugs-without-the-source/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://codelab.wordpress.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
																										


												<input type="hidden" id="highlander_comment_nonce" name="highlander_comment_nonce" value="4f82235740" /><input type="hidden" name="_wp_http_referer" value="/2014/04/22/fixing-my-old-bugs-without-the-source/" />
<input type="hidden" name="hc_post_as" id="hc_post_as" value="guest" />

<div class="comment-form-field comment-textarea">
	<label for="comment">Enter your comment here...</label>
	<div id="comment-form-comment"><textarea id="comment" name="comment" title="Enter your comment here..."></textarea></div>
</div>

<div id="comment-form-identity">

	<div id="comment-form-nascar">
		<p>Fill in your details below or click an icon to log in:</p>
		<ul>
			<li class="selected" style="display:none;">
				<a href="#comment-form-guest" id="postas-guest" title="Guest">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:WordPress.com" id="postas-wordpress" title="WordPress.com">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Twitter" id="postas-twitter" title="Twitter">
					<span></span>
				</a>
			</li>
			<li>
				<a href="#comment-form-load-service:Facebook" id="postas-facebook" title="Facebook">
					<span></span>
				</a>
			</li>
			<li>
			<iframe id="googleplus-sign-in" name="googleplus-sign-in" src="https://public-api.wordpress.com/connect/?googleplus-sign-in=http%3A%2F%2Fcodelab.wordpress.com" width="24" height="24" scrolling="no" allowtransparency="true" seamless="seamless" frameborder="0"></iframe>
			</li>
		</ul>
	</div>

	<div id="comment-form-guest" class="comment-form-service selected">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
<a href="https://gravatar.com/site/signup/" target="_blank">				<img src="" alt="Gravatar" width="25" class="no-grav" />
</a>			</div>

				<div class="comment-form-fields">
				<div class="comment-form-field comment-form-email">
					<label for="email">Email <span class="required">(required)</span> <span class="nopublish">(Address never made public)</span></label>
					<div class="comment-form-input"><input id="email" name="email" type="email" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-author">
					<label for="author">Name <span class="required">(required)</span></label>
					<div class="comment-form-input"><input id="author" name="author" type="text" value="" /></div>
				</div>
				<div class="comment-form-field comment-form-url">
					<label for="url">Website</label>
					<div class="comment-form-input"><input id="url" name="url" type="text" value="" /></div>
				</div>
			</div>
	
		</div>
	</div>

	<div id="comment-form-wordpress" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="http://s2.wp.com/wp-content/mu-plugins/highlander-comments/images/wplogo.png?m=1391188133g" alt="WordPress.com Logo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="wp_avatar" id="wordpress-avatar" class="comment-meta-wordpress" value="" />
				<input type="hidden" name="wp_user_id" id="wordpress-user_id" class="comment-meta-wordpress" value="" />
				<input type="hidden" name="wp_access_token" id="wordpress-access_token" class="comment-meta-wordpress" value="" />
				<p class="comment-form-posting-as pa-wordpress"><strong></strong> You are commenting using your WordPress.com account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'wordpress' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-twitter" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="" alt="Twitter picture" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="twitter_avatar" id="twitter-avatar" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_user_id" id="twitter-user_id" class="comment-meta-twitter" value="" />
				<input type="hidden" name="twitter_access_token" id="twitter-access_token" class="comment-meta-twitter" value="" />
				<p class="comment-form-posting-as pa-twitter"><strong></strong> You are commenting using your Twitter account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'twitter' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-facebook" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="" alt="Facebook photo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="fb_avatar" id="facebook-avatar" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_user_id" id="facebook-user_id" class="comment-meta-facebook" value="" />
				<input type="hidden" name="fb_access_token" id="facebook-access_token" class="comment-meta-facebook" value="" />
				<p class="comment-form-posting-as pa-facebook"><strong></strong> You are commenting using your Facebook account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'facebook' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>

	<div id="comment-form-googleplus" class="comment-form-service">
		<div class="comment-form-padder">
			<div class="comment-form-avatar">
				<img src="" alt="Google+ photo" width="25" class="no-grav" />
			</div>

				<div class="comment-form-fields">
				<input type="hidden" name="googleplus_avatar" id="googleplus-avatar" class="comment-meta-googleplus" value="" />
				<input type="hidden" name="googleplus_user_id" id="googleplus-user_id" class="comment-meta-googleplus" value="" />
				<input type="hidden" name="googleplus_access_token" id="googleplus-access_token" class="comment-meta-googleplus" value="" />
				<p class="comment-form-posting-as pa-googleplus"><strong></strong> You are commenting using your Google+ account. <span class="comment-form-log-out">(&nbsp;<a href="javascript:HighlanderComments.doExternalLogout( 'googleplus' );">Log&nbsp;Out</a>&nbsp;/&nbsp;<a href="#" onclick="javascript:HighlanderComments.switchAccount();return false;">Change</a>&nbsp;)</span></p>
			</div>
	
		</div>
	</div>


	<div id="comment-form-load-service" class="comment-form-service">
		<div class="comment-form-posting-as-cancel"><a href="javascript:HighlanderComments.cancelExternalWindow();">Cancel</a></div>
		<p>Connecting to %s</p>
	</div>

	
</div>

<script type="text/javascript">
var highlander_expando_javascript = function(){
	var input = document.createElement( 'input' ),
	    comment = jQuery( '#comment' );

	if ( 'placeholder' in input ) {
		comment.attr( 'placeholder', jQuery( '.comment-textarea label' ).remove().text() );
	}

	// Expando Mode: start small, then auto-resize on first click + text length
	jQuery( '#comment-form-identity' ).hide();
	jQuery( '#comment-form-subscribe' ).hide();
	jQuery( '#commentform .form-submit' ).hide();

	comment.css( { 'height':'10px' } ).one( 'focus', function() {
		var timer = setInterval( HighlanderComments.resizeCallback, 10 )
		jQuery( this ).animate( { 'height': HighlanderComments.initialHeight } ).delay( 100 ).queue( function(n) { clearInterval( timer ); HighlanderComments.resizeCallback(); n(); } );
		jQuery( '#comment-form-identity' ).slideDown();
		jQuery( '#comment-form-subscribe' ).slideDown();
		jQuery( '#commentform .form-submit' ).slideDown();
	});
}
jQuery(document).ready( highlander_expando_javascript );
</script>

<div id="comment-form-subscribe">
	<p class="comment-subscription-form"><input type="checkbox" name="subscribe" id="subscribe" value="subscribe" style="width: auto;" tabindex="6"/> <label class="subscribe-label" id="subscribe-label" for="subscribe" style="display: inline;">Notify me of follow-up comments via email.</label></p></div>

<style type="text/css">
#respond .comment-form-avatar { display: none !important; }
#respond .comment-form-fields { margin-left: 0 !important; }
</style>

												<p class="form-submit">
							<input name="submit" type="submit" id="comment-submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='350' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="bc4f0a839e" /></p>
<input type="hidden" name="genseq" value="1398255282" />
<script type='text/javascript' src='http://s0.wp.com/wp-content/mu-plugins/akismet-3.0/_inc/form.js?m=1395714917g'></script>
<p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="202"/></p>					</form>
							</div><!-- #respond -->
			<div style="clear: both"></div>

<div class="nextprev">
<div class="alignleft"> &laquo; <a href="http://codelab.wordpress.com/2014/03/25/plugin-reloading-for-3dsmax-exporters/" rel="prev">Plugin reloading for 3dsmax&nbsp;exporters</a></div><br />
<div class="alignright"> </div>
</div>

						</div><!-- end content -->
						<div id="footer">
							<a href="http://wordpress.com/?ref=footer_blog">Blog at WordPress.com</a>.
							<span class="sep"> | </span>
							<a href="http://theme.wordpress.com/themes/garland/" title="Learn more about this theme">The Garland Theme</a>.						</div>
					</div>
				</div>
			</div>
		</div> <!-- .left-corner, .right-corner, #squeeze, #center -->
		<div id="sidebar-right" class="sidebar">

<ul class="menu">

<li id="search-3" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="http://codelab.wordpress.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li>
<li id="categories-2" class="widget widget_categories"><h2 class="widgettitle">Categories</h2>
<select name='cat' id='cat' class='postform' >
	<option value='-1'>Select Category</option>
	<option class="level-0" value="651">articles&nbsp;&nbsp;(8)</option>
	<option class="level-0" value="12556">boring&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="36474">demoscene&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="7334">electronics&nbsp;&nbsp;(2)</option>
	<option class="level-0" value="134451">gamedev&nbsp;&nbsp;(5)</option>
	<option class="level-0" value="658">graphics&nbsp;&nbsp;(21)</option>
	<option class="level-0" value="4843">hacks&nbsp;&nbsp;(17)</option>
	<option class="level-0" value="324281">iOS&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="2008">projects&nbsp;&nbsp;(12)</option>
	<option class="level-0" value="1484070">stereoscopy&nbsp;&nbsp;(1)</option>
	<option class="level-0" value="9203">unix&nbsp;&nbsp;(5)</option>
</select>

<script type='text/javascript'>
/* <![CDATA[ */
	var dropdown = document.getElementById("cat");
	function onCatChange() {
		if ( dropdown.options[dropdown.selectedIndex].value > 0 ) {
			location.href = "http://codelab.wordpress.com/?cat="+dropdown.options[dropdown.selectedIndex].value;
		}
	}
	dropdown.onchange = onCatChange;
/* ]]> */
</script>

</li>
<li id="linkcat-101265" class="widget widget_links"><h2 class="widgettitle">Interesting Blogs</h2>

	<ul class='xoxo blogroll'>
<li><a href="http://takeontheworld.wordpress.com/" title="airness&#8217; blog">airness&#8217; gibberish</a></li>
<li><a href="http://autoverse.net" title="Comzeradd&#8217;s blog">Autoverse</a></li>
<li><a href="http://cdry.wordpress.com/" title="Samurai&#8217;s blog">Coder&#8217;s Diary</a></li>
<li><a href="http://computerhermit.blogspot.com/" title="Another blog of Optimus.">Computer Hermit</a></li>
<li><a href="http://blag.cybernoid.gr/" title="Cybernoid&#8217;s &#8220;blag&#8221;">Cybernoid&#039;s miscellany</a></li>
<li><a href="http://dimitris.apeiro.gr/" title="Dimitris Kalamaras&#8217; Blog">Dimitris Kalamaras&#8217; Blog</a></li>
<li><a href="http://www.spinellis.gr/blog/index.html" title="Diomidis Spinellis&#8217; blog">Diomidis Spinellis&#8217; blog</a></li>
<li><a href="http://gatestodelirium.blogspot.com/" title="Optimus&#8217; blog">Gates to Delirium</a></li>
<li><a href="http://jobo.wordpress.com/" title="jobo&#8217;s blog">Hacker&#039;s Highball</a></li>
<li><a href="http://ufuntu.wordpress.com" title="ufuntu&#8217;s blog">hikikosite</a></li>
<li><a href="http://keramida.wordpress.com/" title="Keramidas&#8217; blog">Keramidas&#8217; blog</a></li>
<li><a href="http://modal-echoes.blogspot.com/" title="Dimitris&#8217; blog">Modal Echoes of the Void</a></li>
<li><a href="http://badsectoracula.blogspot.com/" title="Badsector&#8217;s blog">Ok, a blog</a></li>

	</ul>
</li>

<li id="archives-3" class="widget widget_archive"><h2 class="widgettitle">Archives</h2>
		<ul>
	<li><a href='http://codelab.wordpress.com/2014/04/'>April 2014</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2014/03/'>March 2014</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2013/12/'>December 2013</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2012/11/'>November 2012</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2012/10/'>October 2012</a>&nbsp;(3)</li>
	<li><a href='http://codelab.wordpress.com/2012/03/'>March 2012</a>&nbsp;(2)</li>
	<li><a href='http://codelab.wordpress.com/2011/10/'>October 2011</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2011/09/'>September 2011</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2011/06/'>June 2011</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2011/05/'>May 2011</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2011/02/'>February 2011</a>&nbsp;(2)</li>
	<li><a href='http://codelab.wordpress.com/2010/06/'>June 2010</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2010/02/'>February 2010</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2010/01/'>January 2010</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2009/10/'>October 2009</a>&nbsp;(3)</li>
	<li><a href='http://codelab.wordpress.com/2009/09/'>September 2009</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2009/07/'>July 2009</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2009/06/'>June 2009</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2009/03/'>March 2009</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2009/01/'>January 2009</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/11/'>November 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/09/'>September 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/08/'>August 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/03/'>March 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/02/'>February 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2008/01/'>January 2008</a>&nbsp;(1)</li>
	<li><a href='http://codelab.wordpress.com/2007/12/'>December 2007</a>&nbsp;(2)</li>
		</ul>
</li>
<li id="meta-3" class="widget widget_meta"><h2 class="widgettitle">Meta</h2>
			<ul>
			<li><a href="http://wordpress.com/signup/?ref=wplogin">Register</a></li>			<li><a href="http://codelab.wordpress.com/wp-login.php">Log in</a></li>
			<li><a href="http://codelab.wordpress.com/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://codelab.wordpress.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="http://wordpress.com/?ref=footer_blog">Blog at WordPress.com</a>.</li>			</ul>
</li>
</ul>
</div>
	</div><!-- container -->
</div><!-- layout -->
	<div style="display:none">
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"http:\/\/codelab.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"http:\/\/codelab.wordpress.com\/wp-login.php?action=logout&_wpnonce=4ba5f8fef4","homeURL":"http:\/\/codelab.wordpress.com\/","postID":"350","gravDefault":"mystery","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"","userIsLoggedIn":"","isJetpack":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://s0.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1395185286j'></script>

	<div id="bit" class="loggedout-follow-normal">
		<a class="bsub" href="javascript:void(0)"><span id='bsub-text'>Follow</span></a>
		<div id="bitsubscribe">

					<h3><label for="loggedout-follow-field">Follow &ldquo;Code Laboratorium&rdquo;</label></h3>

			<form action="https://subscribe.wordpress.com" method="post" accept-charset="utf-8" id="loggedout-follow">
			<p>Get every new post delivered to your Inbox.</p>

			<p id="loggedout-follow-error" style="display: none;"></p>

			
			<p><input type="email" name="email" value="Enter your email address" onfocus='this.value=(this.value=="Enter your email address") ? "" : this.value;' onblur='this.value=(this.value=="") ? "Enter email address" : this.value;'  id="loggedout-follow-field"/></p>

			<input type="hidden" name="action" value="subscribe"/>
			<input type="hidden" name="blog_id" value="2300657"/>
			<input type="hidden" name="source" value="http://codelab.wordpress.com/2014/04/22/fixing-my-old-bugs-without-the-source/"/>
			<input type="hidden" name="sub-type" value="loggedout-follow"/>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="e7b72b690a" /><input type="hidden" name="_wp_http_referer" value="/2014/04/22/fixing-my-old-bugs-without-the-source/" />
			<p id='bsub-subscribe-button'><input type="submit" value="Sign me up" /></p>
			</form>
					<div id='bsub-credit'><a href="http://wordpress.com/signup/?ref=lof">Powered by WordPress.com</a></div>
		</div><!-- #bitsubscribe -->
	</div><!-- #bit -->
	<script type="text/javascript">
	var skimlinks_pub_id = "725X584219"
	var skimlinks_sitename = "codelab.wordpress.com";
	</script>
	<script type="text/javascript" src="http://s.skimresources.com/js/725X1342.skimlinks.js"></script><script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=20111117'></script>
		<iframe src='http://widgets.wp.com/likes/master.html?ver=20140227#ver=20140227&amp;mp6=1' scrolling='no' id='likes-master' name='likes-master' style='display:none;'></iframe>
		<div id='likes-other-gravatars'><div class="likes-text"><span>%d</span> bloggers like this:</div><ul class="wpl-avatars sd-like-gravatars"></ul></div>
		<script type="text/javascript">
		//<![CDATA[
			var jetpackLikesWidgetQueue = [];
			var jetpackLikesWidgetBatch = [];
			var jetpackLikesMasterReady = false;

			function JetpackLikespostMessage( message, target ) {
				if ( "string" === typeof message ){
					try{
						message = JSON.parse( message );
					}
					catch(e) {
						return;
					}
				}

				pm( {
					target: target,
					type: 'likesMessage',
					data: message,
					origin: '*'
				} );
			}

			function JetpackLikesBatchHandler() {
				var requests = [];
				jQuery( 'div.jetpack-likes-widget-unloaded' ).each( function( i ) {
					if ( jetpackLikesWidgetBatch.indexOf( this.id ) > -1 )
						return;
					jetpackLikesWidgetBatch.push( this.id );
					var regex = /like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/;
					var match = regex.exec( this.id );
					if ( ! match || match.length != 5 )
						return;

					var info = {
						blog_id: match[2],
						width:   this.width
					};

					if ( 'post' == match[1] ) {
						info.post_id = match[3];
					} else if ( 'comment' == match[1] ) {
						info.comment_id = match[3];
					}

					info.obj_id = match[4];

					requests.push( info );
				});

				if ( requests.length > 0 ) {
					JetpackLikespostMessage( { event: 'initialBatch', requests: requests }, window.frames['likes-master'] );
				}
			}

			function JetpackLikesMessageListener( event ) {
				if ( "undefined" == typeof event.event )
					return;

				if ( 'masterReady' == event.event ) {
					jQuery( document ).ready( function() {
						jetpackLikesMasterReady = true;

						var stylesData = {
								event: 'injectStyles'
						};

						if ( jQuery( 'iframe.admin-bar-likes-widget' ).length > 0 ) {
							JetpackLikespostMessage( { event: 'adminBarEnabled' }, window.frames[ 'likes-master' ] );

							stylesData.adminBarStyles = {
								background: jQuery( '#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a' ).css( 'background' ),
								isRtl: ( 'rtl' == jQuery( '#wpadminbar' ).css( 'direction' ) )
							};
						}

						if ( !window.addEventListener )
							jQuery( '#wp-admin-bar-admin-bar-likes-widget' ).hide();

						stylesData.textStyles = {
							color: jQuery( '.sd-text-color').css( 'color' ),
							fontFamily: jQuery( '.sd-text-color' ).css( 'font-family' ),
							fontSize: jQuery( '.sd-text-color' ).css( 'font-size' ),
							direction: jQuery( '.sd-text-color' ).css( 'direction' ),
							fontWeight: jQuery( '.sd-text-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-text-color' ).css( 'font-style' ),
							textDecoration: jQuery( '.sd-text-color' ).css('text-decoration')
						};

						stylesData.linkStyles = {
							color: jQuery( '.sd-link-color' ).css('color'),
							fontFamily: jQuery( '.sd-link-color' ).css('font-family'),
							fontSize: jQuery( '.sd-link-color' ).css('font-size'),
							textDecoration: jQuery( '.sd-link-color' ).css('text-decoration'),
							fontWeight: jQuery( '.sd-link-color' ).css( 'font-weight' ),
							fontStyle: jQuery( '.sd-link-color' ).css( 'font-style' )
						};

						JetpackLikespostMessage( stylesData, window.frames[ 'likes-master' ] );

						JetpackLikesBatchHandler();

						jQuery( document ).on( 'inview', 'div.jetpack-likes-widget-unloaded', function() {
							jetpackLikesWidgetQueue.push( this.id );
						});
					});
				}

				if ( 'showLikeWidget' == event.event ) {
					jQuery( '#' + event.id + ' .post-likes-widget-placeholder'  ).fadeOut( 'fast', function() {
						jQuery( '#' + event.id + ' .post-likes-widget' ).fadeIn( 'fast', function() {
							JetpackLikespostMessage( { event: 'likeWidgetDisplayed', blog_id: event.blog_id, post_id: event.post_id, obj_id: event.obj_id }, window.frames['likes-master'] );
						});
					});
				}

				if ( 'clickReblogFlair' == event.event ) {
					wpcom_reblog.toggle_reblog_box_flair( event.obj_id );
				}

				if ( 'showOtherGravatars' == event.event ) {
					var $container = jQuery( '#likes-other-gravatars' );
					var $list = $container.find( 'ul' );

					$container.hide();
					$list.html( '' );

					$container.find( '.likes-text span' ).text( event.total );

					jQuery.each( event.likers, function( i, liker ) {
						$list.append( '<li class="' + liker.css_class + '"><a href="' + liker.profile_URL + '" class="wpl-liker" rel="nofollow" target="_parent"><img src="' + liker.avatar_URL + '" alt="' + liker.name + '" width="30" height="30" style="padding-right: 3px;" /></a></li>');
					} );

					var offset = jQuery( "[name='" + event.parent + "']" ).offset();

					$container.css( 'left', offset.left + event.position.left - 10 + 'px' );
					$container.css( 'top', offset.top + event.position.top - 33 + 'px' );

					var rowLength = Math.floor( event.width / 37 );
					var height = ( Math.ceil( event.likers.length / rowLength ) * 37 ) + 13;
					if ( height > 204 ) {
						height = 204;
					}

					$container.css( 'height', height + 'px' );
					$container.css( 'width', rowLength * 37 - 7 + 'px' );

					$list.css( 'width', rowLength * 37 + 'px' );

					$container.fadeIn( 'slow' );

					var scrollbarWidth = $list[0].offsetWidth - $list[0].clientWidth;
					if ( scrollbarWidth > 0 ) {
						$container.width( $container.width() + scrollbarWidth );
						$list.width( $list.width() + scrollbarWidth );
					}
				}
			}

			pm.bind( 'likesMessage', function(e) { JetpackLikesMessageListener(e); } );

			jQuery( document ).click( function( e ) {
				var $container = jQuery( '#likes-other-gravatars' );

				if ( $container.has( e.target ).length === 0 ) {
					$container.fadeOut( 'slow' );
				}
			});

			function JetpackLikesWidgetQueueHandler() {
				var wrapperID;
				if ( ! jetpackLikesMasterReady ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				if ( jetpackLikesWidgetQueue.length > 0 ) {
					// We may have a widget that needs creating now
					var found = false;
					while( jetpackLikesWidgetQueue.length > 0 ) {
						// Grab the first member of the queue that isn't already loading.
						wrapperID = jetpackLikesWidgetQueue.splice( 0, 1 )[0];
						if ( jQuery( '#' + wrapperID ).hasClass( 'jetpack-likes-widget-unloaded' ) ) {
							found = true;
							break;
						}
					}
					if ( ! found ) {
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				} else if ( jQuery( 'div.jetpack-likes-widget-unloaded' ).length > 0 ) {
					// Grab any unloaded widgets for a batch request
					JetpackLikesBatchHandler();

					// Get the next unloaded widget
					wrapperID = jQuery( 'div.jetpack-likes-widget-unloaded' ).first()[0].id;
					if ( ! wrapperID ) {
						// Everything is currently loaded
						setTimeout( JetpackLikesWidgetQueueHandler, 500 );
						return;
					}
				}

				if ( 'undefined' === typeof wrapperID ) {
					setTimeout( JetpackLikesWidgetQueueHandler, 500 );
					return;
				}

				var $wrapper = jQuery( '#' + wrapperID );
				$wrapper.find( 'iframe' ).remove();

				if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='22px' width='68px' frameBorder='0' scrolling='no' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				} else {
					$wrapper.find( '.post-likes-widget-placeholder' ).after( "<iframe class='post-likes-widget jetpack-likes-widget' name='" + $wrapper.data( 'name' ) + "' height='55px' width='100%' frameBorder='0' src='" + $wrapper.data( 'src' ) + "'></iframe>" );
				}

				$wrapper.removeClass( 'jetpack-likes-widget-unloaded' ).addClass( 'jetpack-likes-widget-loading' );

				$wrapper.find( 'iframe' ).load( function( e ) {
					var $iframe = jQuery( e.target );
					$wrapper.removeClass( 'jetpack-likes-widget-loading' ).addClass( 'jetpack-likes-widget-loaded' );

					JetpackLikespostMessage( { event: 'loadLikeWidget', name: $iframe.attr( 'name' ), width: $iframe.width() }, window.frames[ 'likes-master' ] );

					if ( $wrapper.hasClass( 'slim-likes-widget' ) ) {
						$wrapper.find( 'iframe' ).Jetpack( 'resizeable' );
					}
				});
				setTimeout( JetpackLikesWidgetQueueHandler, 250 );
			}
			JetpackLikesWidgetQueueHandler();
		//]]>
		</script>
<script type='text/javascript' src='http://s0.wp.com/_static/??/wp-content/js/devicepx.js,/wp-includes/js/comment-reply.min.js?m=1389017300j'></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script><script src="http://s.stats.wordpress.com/w.js?21" type="text/javascript"></script>
<script type="text/javascript">
st_go({'blog':'2300657','v':'wpcom','tz':'0','user_id':'0','post':'350','subd':'codelab'});
ex_go({'crypt':'UE40eW5QN0p8M2Y/RE1oOHBqWkJdYy5wL35xRnR4SVtWLmluVHQrZ3JBRDNRaV9yeU4rX041RXBzU1FiayxfJjYsMDhLNmIrWEkxPVlEUUIrPXwwXzRpNVlbb1p6SlB4QzYvLHNiOTVDVXZZV3puU3AyViVJZUVsW3lMbGJTZzNHQ0prVj9DZnE4XWNBL21BX29BUXhReGUuRmFdPS41SjUuQmdbMkd2UWRyLSZhOUxjR34wUl9nSDNjdV1bTmZda3QlWjlDUXdPLEhQMCVBVlJrdGIsS3xEQmk4SENXbDA1NXoucD9sbmt3YllNS3g4dV95ZzVSMWowRC5TZHE3bkIxOUpuekdFPTQ2UmF6dVF+QnAmNC90SFtKKyZxWVVHcSxJc1E='});
addLoadEvent(function(){linktracker_init('2300657',350);});
	</script>
<noscript><img src="http://stats.wordpress.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//stats.wordpress.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>